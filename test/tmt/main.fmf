require:
    - bats
    - golang
    - make
    - podman
    - podman-remote
    - podman-tests
    - slirp4netns

/local-root:
    tag: [ downstream, upstream ]
    summary: local rootful test
    test: ls -al $PODMAN_SOURCE_DIR && bash $PODMAN_SOURCE_DIR/test/tmt/test.sh localsystem
    duration: 60m

/local-rootless:
    tag: [ downstream, upstream ]
    summary: rootless test
    test: ls -al $PODMAN_SOURCE_DIR && rm -rf /home/$ROOTLESS_USER/.local/share/containers && su --whitelist-environment=$(cat $PODMAN_SOURCE_DIR/plans/tmt-envvars | tr '\n' ',') - $ROOTLESS_USER -c 'bash $PODMAN_SOURCE_DIR/test/tmt/test.sh localsystem'
    duration: 60m

/remote-root:
    tag: [ downstream, upstream ]
    summary: remote rootful test
    test: ls -al $PODMAN_SOURCE_DIR && bash $PODMAN_SOURCE_DIR/test/tmt/test.sh remotesystem
    duration: 60m

/remote-rootless:
    tag: [ downstream, upstream ]
    summary: remote rootless test
    test: ls -al $PODMAN_SOURCE_DIR && rm -rf /home/$ROOTLESS_USER/.local/share/containers && su --whitelist-environment=$(cat $PODMAN_SOURCE_DIR/plans/tmt-envvars | tr '\n' ',') - $ROOTLESS_USER -c 'bash $PODMAN_SOURCE_DIR/test/tmt/test.sh remotesystem'
    duration: 60m
