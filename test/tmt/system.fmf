require:
    - bats
    - podman-remote
    - podman-tests
    - slirp4netns

environment:
    PODMAN: /usr/bin/podman
    PODMAN_TESTING: /usr/bin/podman-testing
    QUADLET: /usr/libexec/podman/quadlet
    ROOTLESS_USER: "fedora"
adjust+:
    environment+:
        ROOTLESS_USER: "ec2-user"
    when: distro == centos-stream

/local:
    summary: Local tests
    /root:
        tag: [local, root]
        summary: Rootful test
        test: bash ./system.sh
        duration: 60m
    /rootless:
        tag: [local, rootless]
        summary: Rootless test
        test: bash ./system.sh rootless
        duration: 60m

/remote:
    summary: Remote tests
    environment+:
        PODMAN: /usr/bin/podman-remote
    /root:
        tag: [remote, root]
        summary: Rootful test
        test: bash ./system.sh
        duration: 60m
    /rootless:
        tag: [remote, rootless]
        summary: Rootless test
        test: bash ./system.sh rootless
        duration: 60m
