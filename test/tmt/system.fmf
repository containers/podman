require:
    - bats
    - podman-remote
    - podman-tests
    - slirp4netns

environment:
    PODMAN: /usr/bin/podman
    PODMAN_TESTING: /usr/bin/podman-testing
    QUADLET: /usr/libexec/podman/quadlet
    ROOTLESS_USER: "fedora"
adjust+:
    environment+:
        ROOTLESS_USER: "ec2-user"
    when: distro == centos-stream

/local-root:
    tag: [ downstream, upstream ]
    summary: local rootful test
    test: bash ./system.sh
    duration: 60m

/local-rootless:
    tag: [ downstream, upstream ]
    summary: rootless test
    test: bash ./system.sh rootless
    duration: 60m

/remote-root:
    tag: [ downstream, upstream ]
    summary: remote rootful test
    test: bash ./system.sh
    duration: 60m
    adjust+:
        environment+:
            PODMAN: /usr/bin/podman-remote

/remote-rootless:
    tag: [ downstream, upstream ]
    summary: remote rootless test
    test: bash ./system.sh rootless
    duration: 60m
    adjust+:
        environment+:
            PODMAN: /usr/bin/podman-remote
